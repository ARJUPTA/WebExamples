<html>
    <head>
        <title>Todo-Vanila</title>
    </head>
    <body>
        <ul id="todos">
            <li>Hello</li>
        </ul>

        <form>
            <input name="todo"type="text">
            <input type="submit" value="Add Todo">
        </form>

        <script>
            // Get DOM elements
            const form = document.querySelector("form");
            const input = document.querySelector("[name='todo']");
            const todoList = document.querySelector("[id='todos']");

            //  Read previous state data
            const existingTodos = JSON.parse(localStorage.getItem("todos"));
            const todoData = existingTodos || [];
            
            // Function to add a todo and update the ui
            function addTodo(todoText){
                console.log("addTodo");
                todoData.push(todoText);
                const li = document.createElement("li");
                li.innerHTML = todoText;
                todoList.appendChild(li);
                localStorage.setItem("todos", JSON.stringify(todoData));
            }

            // Update UI with prevous data
            todoData.forEach(element => {
                addTodo(element);
            });

            // Event Listener for the form
            form.onsubmit = (event) => {
                event.preventDefault();
                addTodo(input.value);
            };
            // form.onsubmit(function(event){
            //     event.preventDefault();
            //     addTodo(input.nodeValue);
            // });
            // function onSubmit(){
            //     // event.preventDefault();
            //     addTodo(input.nodeValue);
            //     // return false;
            // }
            localStorage.clear();
        </script>
    </body>
</html>